# 03 변수 : 데이터의 형 변환 (Type conversion)



- **데이터의 형 변환이란?**
  - 변수에 담겨있는 데이터를 다른 데이터 형식의 변수에 옮겨 담는 것
 
<br>

- **데이터의 형 변환 방식**
  - 크기(표현 범위)가 서로 다른 정수 사이의 변환
  - 부호 있느 정수와 부호 없는 정수 사이의 변환
  - 크기(표현 범위)가 서로 다른 부동 소수점 사이의 변환
  - 부동 소수점과 정수 사이의 변환
  - 문자열과 숫자 사이의 형 변환
 
<br>

## 03.1. 크기가 서로 다른 정수 사이의 형 변환

- **작은 형수 형식의 변수에 있는 데이터를 큰 정수 형식의 변수로 옮길 때**
  - 큰 정수 형식의 허용 범위가 더 크기 때문에 문제 없이 형식 변환 가능

<br>

- **큰 정수 형식의 변수에 있는 데이터를 작은 정수 형식의 변수로 옮길 때**
  - 큰 정수 형식의 데이터 값이 작은 정수 형식의 최대 범위 안이면 가능
  - 작은 정수 형식보다 큰 데이터를 넣을 경우 오버플로우(Overflow) 발생
    - 데이터의 원본이 훼손되어 다른 데이터가 저장

<br>

- **예시**
  - 작은 컵의 물을 큰 컵에 옮겨 담을 때 넘칠 걱정이 없다.
     - `sbyte` 최대 용량 127 => `short` 최대 용량 32767   

  - 큰 컵의 물을 작은 컵에 옮겨 담을 때 작은 컵의 최대 용량보다 큰 물을 담으려고 하면 넘친다.
    - `short` 최대 용량 32767 => `sbyte` 최대 용량 127
   
<br>

## 03.2. 부호 있는 정수와 부호 없는 정수 사이의 변환
- **`byte`,`sbyte` 데이터를 예로 들었을 때**
  - 부호 있는 정수(`sbyte`)의 범위 : -128 ~ 127
  - 부호 없는 정수(`byte`)의 범위 : 0 ~ 255
 
<br>

  - 부호 있는 정수를 부호 없는 정수에 대입할 때
     - Type01. 부호 있는 정수가 양수일 때
       - 데이터 손실 없음
     - Type02. 부호 있는 정수가 음수일 때
       - 부호 없는 정수는 음수 표현 범위도 값을 표현하는데 쓰기 때문에 데이터가 변경됨

<br>

  - 부호 없는 정수를 부호 있는 정수에 대입할 때
    - Type03. 부호 없는 정수가 부호 있는 정수 최대 값 보다 작을 때
      - 데이터 손실 없음
    - Type04. 부호 없는 정수가 부호 있는 정수 최대 값 보다 클 때
      - 숫자로 표현된 부분이 부호 있는 정수에서는 기호를 표현하는데 사용되기 때문에 데이터가 변경됨

<br>

## 03.3. 크기가 서로 다른 부동 소수점 사이의 변환
- `float`과 `double` 사이의 형 변환
  - 부동 소수점 형식의 특성상 **오버플로우가 존재하지 않음**
  - **소수점의 정밀도에 손상을 입음**
    - `float`과 `double`은 소수를 이진수로 메모리에 보관
    - 이것을 다른 형식을 변환할 땐 10진수로 복원한 후 다시 이진수로 변환해서 기록
    - 한 예로 1/3의 경우 0.3333.. 의 소수 표현
   
<br>

## 03.4. 부동 소수점과 정수 사이의 변환
- 부동 소수점 형식을 정수 형식으로
  - 소수점 아래는 버리고 소수점 위의 값만 남긴다. (반올림이 아님)
    - ex) `0.1f = 0`, `0.9f = 0`, `1.1f = 1`
   
<br>

## 03.5. 문자열과 숫자 사이의 변환
- **문자열 데이터를 숫자 데이터로 변환할 때**
  - `Parse()` 메소드를 이용한 형 변환
    - 정수 형식, 부동 소수점 형식을 문자열로 변경할 땐 `Parse()` 메소드를 이용
      - `저장할 변수 = int.Parse(문자열 데이터);`
      - `저장할 변수 = float.Parse(문자열 데이터);`
      - `int intValue = int.Parse("31");`
      - `float floatValue = float.Parse("31.3482");`
  - `TryParse()` 메소드를 이용한 더 안전한 형 변환
    - `Parse()`는 형 변환에 실패하면 Console View에 에러를 출력 (게임이 진행중일 땐 알 수 없음)
    - `TryParse()`는 형 변환에 성공했는지 여부를 논리 형으로 알려준다 (결과에 따라 설정 가능)
      - `형 변환 성공 여부 = int.TryParse(문자열 데이터, out 저장할 변수);`
      - ``` cs
        int intValue;
        bool isConversion = int.TryParse("33",out intValue);

        // 성공 : isConversion = true, intValue = 33;
        // 실패 : isConversion = false, intValue = 0;
        ```

<br>

- **`Parse()`, `TryParse()` 메소드로 변환할 수 있는 숫자 데이터 타입 (정수, 실수)**
  - 총 11개 : `sbyte`, `byte`, `short`, `ushort`, `int`, `uint`, `long`, `ulong`, `float`, `double`, `decimal`

<br>

- **숫자 데이터를 문자열 데이터로 변환할 때**
  - `ToString()` 메소드를 이용한 형 변환
``` cs
int intValue = 31;
string stringValue = "숫자가 아닙니다.";
stringValue = intValue.ToString();
// 현재 stringValue = "31";

float floatValue = 31.3482f;
stringValue = floatValue.ToString();
// 현재 stringValue = "31.3482";
```

<br>

- **참고 자료**
  - [유튜브 고박사의 유니티 노트 [Unity C#] #03 변수 : 데이터의 형 변환 (Type conversion)](https://www.youtube.com/watch?v=3NuO7TaWl0s&list=PLC2Tit6NyVicT5cCqILMWXpXVEoM9ufyH&index=3)
